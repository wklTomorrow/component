<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <script>
      (function () {
        window.adapt = function (designWidth, rem2px) {
          var d = window.document.createElement("div");
          d.style.width = "1rem";
          d.style.display = "none";
          var head = window.document.getElementsByTagName("head")[0];
          head.appendChild(d);
          var defaultFontSize = parseFloat(
            window.getComputedStyle(d, null).getPropertyValue("width")
          );
          d.remove();
          document.documentElement.style.fontSize =
            (Math.min(
              145,
              Math.max(
                (window.innerWidth / designWidth) * rem2px,
                (document.documentElement.clientWidth / designWidth) * rem2px,
                85.3333
              )
            ) /
              defaultFontSize) *
              100 +
            "%";
          var st = document.createElement("style");
          var portrait =
            "@media screen and (min-width: " +
            window.innerWidth +
            "px) { html { font-size: " +
            (window.innerWidth / (designWidth / rem2px) / defaultFontSize) *
              100 +
            "%;}}";
          var landscape =
            "@media screen and (min-width: " +
            window.innerHeight +
            "px) { html { font-size: " +
            (window.innerHeight / (designWidth / rem2px) / defaultFontSize) *
              100 +
            "%;}}";
          st.innerHTML = portrait + landscape;
          head.appendChild(st);
          return defaultFontSize;
        };
        var designWidth = 375,
          rem2px = 100;
        window.adapt(designWidth, rem2px);
      })();
    </script>
    <script>
      (function () {
        var designWidth = 375,
          rem2px = 100;
        function setRfs() {
          document.documentElement.style.fontSize =
            Math.min(
              110.4,
              Math.max(
                (window.innerWidth / designWidth) * rem2px,
                (document.documentElement.clientWidth / designWidth) * rem2px,
                85.3333
              )
            ) + "px";
        }
        setRfs();
        var tid;
        window.addEventListener(
          "resize",
          function () {
            clearTimeout(tid);
            tid = setTimeout(setRfs, 300);
          },
          false
        );
      })();
    </script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
      }
      .h2 {
        font-size: 0.18rem;
        /* font-size: 18px; */
      }
      .h3 {
        font-size: 0.16rem;
      }
    </style>
  </head>
  <body>
    <h2 class="h2">rem 布局相关</h2>
    <h2 style="font-size: 4.8vw;">rem 布局相关</h2>
    <!-- <div>
      <h3 class="h3">pc端展示</h3>
    </div>
    <div>
      <h3 class="h3">移动端展示</h3>
    </div> -->
  </body>
</html>
